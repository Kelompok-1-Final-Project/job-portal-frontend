<div class="container">
    <form>
        <div class="card-container flex flex-wrap justify-content-start align-items-center" style="min-height: 700px">
            <div class="flex col-12">
                <h2 class="text-center text-3xl font-bold mb-6">Vacancy Information</h2>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">Vacancy Title</label>
                <p class="text-lg">{{ job.jobCode }}</p>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">Position</label>
                <p class="text-lg">{{ job.positionName }}</p>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">Salary</label>
                <p class="text-lg">{{ job.salaryStart }} - {{ job.salaryEnd }}</p>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">Expired Time</label>
                <p class="text-lg">{{ job.endDate }}</p>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">Company</label>
                <p class="text-lg">{{ job.companyName }}</p>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">Employment Type</label>
                <p class="text-lg">{{ job.employmentName }}</p>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">Status</label>
                <p class="text-lg">{{ job.statusName }}</p>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">Description</label>
                <p class="text-lg">{{ job.description }}</p>
            </div>
            <div class="flex col-12">
                <h2 class="text-center text-3xl font-bold mb-6">Vacancy PIC</h2>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">HR</label>
                <p class="text-lg">{{job.hrName}}</p>
            </div>
            <div class="col-12 md:col-6 lg:col-3 mb-4 text-left">
                <label class="text-sm font-medium">Interviewer</label>
                <p class="text-lg">{{job.interviewerName}}</p>
            </div>
        </div>

        <p-tabView>
            <p-tabPanel header="Candidate Status">
                <div class=" grid justify-content-center col-12">
                    <h3 class="text-center">All Candidate Progress</h3>
                </div>
                <div class="card">
                    <p-table [value]="candidates" [paginator]="true" [rows]="10">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>No</th>
                                <th>Candidate Name</th>
                                <th>Job Title</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-row let-i="rowIndex">
                            <tr>
                                <td>{{ i+1 }}</td>
                                <td>{{row.candidateName}}</td>
                                <td>{{row.jobName}}</td>
                                <td>{{row.statusName}}</td>
                                <td>
                                    <p-dropdown styleClass="w-full" [options]="status" appendTo="body"
                                        optionValue="progressCode" optionLabel="progressName" [ngModel]="row.statusCode"
                                        [ngModelOptions]="{standalone: true}"
                                        (onChange)="changeStatus($event.value, row.candidateId, row.candidateProgressId)"></p-dropdown>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </p-tabPanel>
            <p-tabPanel header="Question Test">
                <div class="container">
                    <h3>Skill Test</h3>

                    <div class="question-details">
                        <div class="test">
                            <h4 class="detail-heading">Test:</h4>
                            <p>{{ test.testName }}</p>
                        </div>

                        <div class="question">
                            <h4 class="detail-heading">Questions:</h4>
                            <div *ngFor="let q of test.questionGetResDtos; let i = index">
                                <p>{{i+1}}. {{q.question}}</p>
                                <ul>
                                    <li *ngFor="let o of q.optionGetResDtos">
                                        <span>{{o.label}} </span>
                                        <span class="option-answer">({{o.isAnswer}})</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </p-tabPanel>
            <p-tabPanel header="Result Test">
                <div class=" grid justify-content-center col-12">
                    <h3 class="text-center">All Candidate Progress</h3>
                </div>
                <div class="card">
                    <p-table [value]="results" [paginator]="true" [rows]="10">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>No</th>
                                <th>Candidate Name</th>
                                <th>Grade</th>
                                <th>Notes</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-row let-i="rowIndex">
                            <tr>
                                <td>{{ i+1 }}</td>
                                <td>{{row.candidateName}}</td>
                                <td>{{row.grade}}</td>
                                <td>{{row.notes}}</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </p-tabPanel>
        </p-tabView>
    </form>
</div>

<!-- Modal Assessment-->
<p-dialog header="Add Data Assessment" [(visible)]="visibleAssessment" [style]="{ width: '30vw' }">
    <pre>{{assessmentInsertReqDto.value | json}}</pre>
    <form [formGroup]="assessmentInsertReqDto" (ngSubmit)="insertAssessment()">
        <div class="grid surface-card border-round-sm border-400">
            <div class="col-12 md:col-3">
                <label for="inputName">Schedule</label>
            </div>
            <div class="col-12 md:col-9">
                <p-calendar [showIcon]="true" formControlName="schedule"></p-calendar>
            </div>
            <div class="flex flex-wrap justify-content-end mt-2 col-12">
                <button type="submit" pButton pRipple class="p-button-primary">Submit</button>
            </div>
        </div>
    </form>
</p-dialog>

<!-- Modal Interview-->
<p-dialog header="Add Data Interview" [(visible)]="visibleInterview" [style]="{ width: '30vw' }">
    <pre>{{interviewInsertReqDto.value | json}}</pre>
    <form [formGroup]="interviewInsertReqDto" (ngSubmit)="insertInterview()">
        <div class="grid surface-card border-round-sm border-400">
            <div class="col-12 md:col-3">
                <label for="inputName">Schedule</label>
            </div>
            <div class="col-12 md:col-9">
                <p-calendar [showIcon]="true" formControlName="schedule"></p-calendar>
            </div>
            <div class="flex flex-wrap justify-content-end mt-2 col-12">
                <button type="submit" pButton pRipple class="p-button-primary">Submit</button>
            </div>
        </div>
    </form>
</p-dialog>

<!-- Modal MCU-->
<p-dialog header="Add Data Medical Checkup" [(visible)]="visibleMcu" [style]="{ width: '30vw' }">
    <pre>{{medicalcheckupInsertReqDto.value | json}}</pre>
    <form [formGroup]="medicalcheckupInsertReqDto" (ngSubmit)="insertMcu()">
        <div class="grid surface-card border-round-sm border-400">
            <div class="col-12">
                <h3 for="inputName">Apakah anda ingin melanjutkan candidate ke tahap Medical Checkup?</h3>
            </div>
            <div class="flex flex-wrap justify-content-end mt-2 col-12">
                <button type="submit" pButton pRipple class="p-button-primary">Yes</button>
                <button type="button" pButton pRipple class="p-button-secondary" (click)="cancelMcu()">No</button>
            </div>
        </div>
    </form>
</p-dialog>

<!-- Modal Offering-->
<p-dialog header="Add Data Offering" [(visible)]="visibleOffering" [style]="{ width: '30vw' }">
    <pre>{{offeringInsertReqDto.value | json}}</pre>
    <form [formGroup]="offeringInsertReqDto" (ngSubmit)="insertOffering()">
        <div class="grid surface-card border-round-sm border-400">
            <div class="col-12">
                <h3 for="inputName">Apakah anda ingin melanjutkan candidate ke tahap Offering?</h3>
            </div>
            <div class="flex flex-wrap justify-content-end mt-2 col-12">
                <button type="submit" pButton pRipple class="p-button-primary">Yes</button>
                <button type="button" pButton pRipple class="p-button-secondary" (click)="cancelOffering()">No</button>
            </div>
        </div>
    </form>
</p-dialog>

<!-- Modal Hired-->
<p-dialog header="Add Data Hired" [(visible)]="visibleHired" [style]="{ width: '30vw' }">
    <pre>{{hiredInsertReqDto.value | json}}</pre>
    <form [formGroup]="hiredInsertReqDto" (ngSubmit)="insertHired()">
        <div class="grid surface-card border-round-sm border-400">
            <div class="col-12">
                <h3 for="inputName">Apakah anda ingin melanjutkan candidate ke tahap Hired?</h3>
            </div>
            <div class="flex flex-wrap justify-content-end mt-2 col-12">
                <button type="submit" pButton pRipple class="p-button-primary">Yes</button>
                <button type="button" pButton pRipple class="p-button-secondary" (click)="cancelHired()">No</button>
            </div>
        </div>
    </form>
</p-dialog>

<!-- Modal Rejected-->
<p-dialog header="Add Data Rejected" [(visible)]="visibleRejected" [style]="{ width: '30vw' }">
    <pre>{{rejectedInsertReqDto.value | json}}</pre>
    <form [formGroup]="rejectedInsertReqDto" (ngSubmit)="insertRejected()">
        <div class="grid surface-card border-round-sm border-400">
            <div class="col-12">
                <h3 for="inputName">Apakah anda ingin memasukkan candidate ke dalam rejected?</h3>
            </div>
            <div class="flex flex-wrap justify-content-end mt-2 col-12">
                <button type="submit" pButton pRipple class="p-button-primary">Yes</button>
                <button type="button" pButton pRipple class="p-button-secondary" (click)="cancelRejected()">No</button>
            </div>
        </div>
    </form>
</p-dialog>