<div class="container">
  <h2>Question Detail</h2>
  <app-button classBtn="p-button-secondary mt-1" label="Back" routerLink="/questions"></app-button>
  <h3>Question: </h3>

  <form class="edit-form">
    <textarea pInputTextarea rows="4" cols="50" id="question" name="question" [value]="questions?.question"
      disabled></textarea>
  </form>
  <app-button iconBtn="pi pi-pencil" label="Edit Question"
    (clickChange)="editQuestion()"></app-button>

  <p-table [value]="listOption" class="options-table">
    <ng-template pTemplate="header">
      <tr>
        <th>No</th>
        <th>Option</th>
        <th>Answer</th>
        <th>Action</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-option let-i="rowIndex">
      <tr>
        <td>{{ i + 1 }}</td>
        <td>{{option.labels}}</td>
        <td>{{option.isAnswer}}</td>
        <td>
          <app-button (clickChange)="editOption(option.questionOptionId)" iconBtn="pi pi-pencil"
            label="Edit"></app-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<!-- Modal Update Question -->
<p-dialog header="Update Question" [modal]="true" [(visible)]="visibleUpdateQuestion" [style]="{ width: '30vw' }">
  <form [formGroup]="questionUpdateReqDto" (ngSubmit)="updateQuestion()">
    <div class="grid surface-card border-round-sm border-400">
      <div class="col-12 md:col-3">
        <label for="inputName">Question</label>
      </div>
      <div class="col-12 md:col-9">
        <textarea pInputTextarea type="text" class="col-12 " id="inputName" required
          formControlName="question"></textarea>
      </div>
      <div class="flex flex-wrap justify-content-end mt-2 col-12">
        <app-button btnType="submit" classBtn="p-button-primary" [disabled]="questionUpdateReqDto.invalid"
          label="Submit"></app-button>
      </div>
    </div>
  </form>
</p-dialog>

<!-- Modal Update Option-->
<p-dialog header="Update Option" [modal]="true" [(visible)]="visibleOption" [style]="{ width: '30vw' }">
  <form [formGroup]="optionUpdateReqDto" (ngSubmit)="updateOption()">
    <div class="grid surface-card border-round-sm border-400">
      <div class="col-12 md:col-3">
        <label for="inputName">Label</label>
      </div>
      <div class="col-12 md:col-9">
        <input pInputText type="text" class="col-12 " id="inputName" required formControlName="labels">
      </div>
      <div class="col-12 md:col-3">
        <label for="inputName">Answer</label>
      </div>
      <div class="col-12 md:col-9">
        <p-dropdown [options]="keyAnswer" optionLabel="name" optionValue="value"
          formControlName="isAnswer"></p-dropdown>
      </div>
      <div class="flex flex-wrap justify-content-end mt-2 col-12">
        <app-button btnType="submit" classBtn="p-button-primary" [disabled]="optionUpdateReqDto.invalid"
          label="Submit"></app-button>
      </div>
    </div>
  </form>
</p-dialog>