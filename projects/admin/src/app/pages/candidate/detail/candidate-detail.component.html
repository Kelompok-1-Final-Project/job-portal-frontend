<div class="card">
    <h2>Candidate Detail</h2>
    <p-tabView>
        <p-tabPanel header="Family">
            <app-button classBtn="p-button-secondary" label="Back" iconBtn="pi pi-arrow-left"
                styleBtn="margin-bottom:0.5rem; margin-right:0.5rem" link="/candidates/detail/{{candidateId}}"></app-button>
            <app-button label="Add Family" iconBtn="pi pi-plus" styleBtn="margin-bottom:0.5rem;"
                link="/candidates/detail/{{candidateId}}"></app-button>
            <p-table [value]="families" [tableStyle]="{'min-width': '50rem'}">
                <ng-template pTemplate="header" let-columns>
                    <tr>
                        <th scope="row">No</th>
                        <th>Name</th>
                        <th>Relationship</th>
                        <th>Degree</th>
                        <th>Birthdate</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-f let-i="rowIndex">
                    <tr>
                        <td scope="row">{{i+1}}</td>
                        <td>{{f.familyName}}</td>
                        <td>{{f.relationshipName}}</td>
                        <td>{{f.degreeName}}</td>
                        <td>{{f.birthdate}}</td>
                    </tr>
                </ng-template>
            </p-table>
        </p-tabPanel>
        <p-tabPanel header="Work Experience">
            <app-button classBtn="p-button-secondary" label="Back" iconBtn="pi pi-arrow-left"
                styleBtn="margin-bottom:0.5rem; margin-right:0.5rem;" link="/candidates"></app-button>
            <app-button label="Add Experience" icon="pi pi-plus" styleBtn="margin-bottom:0.5rem;"
                link="/candidates/detail/{{candidateId}}" (clickChange)="addExperience()"></app-button>
            <p-table [value]="experiences" [tableStyle]="{'min-width': '50rem'}">
                <ng-template pTemplate="header" let-columns>
                    <tr>
                        <th scope="row">No</th>
                        <th>Position</th>
                        <th>Company</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-f let-i="rowIndex">
                    <tr>
                        <td scope="row">{{i+1}}</td>
                        <td>{{f.positionName}}</td>
                        <td>{{f.companyName}}</td>
                        <td>{{f.startDate}}</td>
                        <td>{{f.endDate}}</td>
                    </tr>
                </ng-template>
            </p-table>
        </p-tabPanel>
    </p-tabView>
</div>

<!-- Modal Experience-->
<p-dialog header="Add Candidate Experience" [modal]="true" [(visible)]="visibleExperience" [style]="{ width: '30vw' }">
    <pre>{{experienceInsertReqDto.value | json}}</pre>
    <form [formGroup]="experienceInsertReqDto" (ngSubmit)="insertExperience()">
        <div class="grid surface-card border-round-sm border-400">
            <div class="col-12 md:col-3">
                <label for="inputName">Position Name</label>
            </div>
            <div class="col-12 md:col-9">
                <input pInputText type="text" class="col-12" required formControlName="positionName">
            </div>
            <div class="col-12 md:col-3">
                <label for="inputName">Company Name</label>
            </div>
            <div class="col-12 md:col-9">
                <input pInputText type="text" class="col-12" required formControlName="companyName">
            </div>
            <div class="col-12 md:col-3">
                <label for="inputName">Start Date</label>
            </div>
            <div class="col-12 md:col-9">
                <p-calendar [showIcon]="true" formControlName="startDate"></p-calendar>
            </div>
            <div class="col-12 md:col-3">
                <label for="inputName">End Date</label>
            </div>
            <div class="col-12 md:col-9">
                <p-calendar [showIcon]="true" formControlName="endDate"></p-calendar>
            </div>
            <div class="flex flex-wrap justify-content-end mt-2 col-12">
                <app-button btnType="submit" label="Submit" link="/candidates/detail/{{candidateId}}"></app-button>
            </div>
        </div>
    </form>
</p-dialog>

<!-- Modal Family-->
<p-dialog header="Add Candidate Family" [modal]="true" [(visible)]="visibleFamily" [style]="{ width: '30vw' }">
    <pre>{{experienceInsertReqDto.value | json}}</pre>
    <form [formGroup]="experienceInsertReqDto" (ngSubmit)="insertFamily()">
        <div class="grid surface-card border-round-sm border-400">
            <div class="col-12 md:col-3">
                <label for="inputName">Position Name</label>
            </div>
            <div class="col-12 md:col-9">
                <input pInputText type="text" class="col-12" required formControlName="positionName">
            </div>
            <div class="col-12 md:col-3">
                <label for="inputName">Company Name</label>
            </div>
            <div class="col-12 md:col-9">
                <input pInputText type="text" class="col-12" required formControlName="companyName">
            </div>
            <div class="col-12 md:col-3">
                <label for="inputName">Start Date</label>
            </div>
            <div class="col-12 md:col-9">
                <p-calendar [showIcon]="true" formControlName="startDate"></p-calendar>
            </div>
            <div class="col-12 md:col-3">
                <label for="inputName">End Date</label>
            </div>
            <div class="col-12 md:col-9">
                <p-calendar [showIcon]="true" formControlName="endDate"></p-calendar>
            </div>
            <div class="flex flex-wrap justify-content-end mt-2 col-12">
                <app-button btnType="submit" label="Submit" link="candidates"></app-button>
            </div>
        </div>
    </form>
</p-dialog>